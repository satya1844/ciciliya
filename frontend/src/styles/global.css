/* Tailwind CSS v4.0 - Modern Syntax */
@import "tailwindcss";

/* Theme customization (replaces tailwind.config.js) */
@theme {
  /* Custom color for primary (Perplexity-style blue) */
  --color-primary-50: oklch(0.97 0.01 250);
  --color-primary-100: oklch(0.93 0.03 250);
  --color-primary-200: oklch(0.87 0.06 250);
  --color-primary-300: oklch(0.78 0.11 250);
  --color-primary-400: oklch(0.68 0.17 250);
  --color-primary-500: oklch(0.57 0.22 250);
  --color-primary-600: oklch(0.48 0.20 250);
  --color-primary-700: oklch(0.40 0.17 250);
  --color-primary-800: oklch(0.32 0.13 250);
  --color-primary-900: oklch(0.26 0.09 250);
  --color-primary-950: oklch(0.17 0.05 250);
}

/* Base styles */
@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    background-color: oklch(0.96 0 0); /* Modern gray-50 equivalent */
    color: oklch(0.15 0 0); /* Modern gray-900 equivalent */
  }
}

/* Component styles - v4 still supports @layer components */
@layer components {
  /* User message bubble (right side) */
  .message-user {
    background-color: var(--color-primary-500);
    color: white;
    margin-inline-start: calc(var(--spacing) * 12); /* replaces ml-12 */
    border-start-start-radius: calc(var(--radius) * 4); /* replaces rounded-l-2xl */
    border-start-end-radius: calc(var(--radius) * 4); /* replaces rounded-tr-2xl */
    border-end-end-radius: calc(var(--radius) / 2); /* replaces rounded-br-md */
    border-end-start-radius: calc(var(--radius) * 4); /* keep left bottom rounded */
    padding: calc(var(--spacing) * 3) calc(var(--spacing) * 4);
    max-width: 80%;
    word-wrap: break-word;
  }
  
  /* Bot message bubble (left side) */
  .message-bot {
    background-color: white;
    color: oklch(0.15 0 0); /* gray-900 */
    margin-inline-end: calc(var(--spacing) * 12); /* replaces mr-12 */
    border-start-start-radius: calc(var(--radius) * 4); /* replaces rounded-tl-2xl */
    border-start-end-radius: calc(var(--radius) * 4); /* replaces rounded-r-2xl */
    border-end-end-radius: calc(var(--radius) * 4); /* keep right bottom rounded */
    border-end-start-radius: calc(var(--radius) / 2); /* replaces rounded-bl-md */
    padding: calc(var(--spacing) * 3) calc(var(--spacing) * 4);
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* replaces shadow-sm */
    border-width: 1px;
    border-color: oklch(0.90 0 0); /* gray-200 */
    max-width: 80%;
  }
  
  /* Source card styling */
  .source-card {
    background-color: oklch(0.98 0 0); /* gray-50 */
    border-width: 1px;
    border-color: oklch(0.90 0 0); /* gray-200 */
    border-radius: calc(var(--radius) * 2); /* rounded-lg */
    padding: calc(var(--spacing) * 3);
    transition-property: color, background-color, border-color;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
    cursor: pointer;
    
    &:hover {
      background-color: oklch(0.96 0 0); /* gray-100 */
    }
  }
  
  /* Source link styling */
  .source-link {
    color: var(--color-primary-600);
    text-decoration: none;
    font-weight: 500;
    
    &:hover {
      color: var(--color-primary-700);
      text-decoration: underline;
    }
  }
  
  /* Loading animation */
  .loading-dots {
    display: inline-flex;
    gap: calc(var(--spacing) * 1);
    
    & span {
      width: calc(var(--spacing) * 2);
      height: calc(var(--spacing) * 2);
      background-color: var(--color-primary-500);
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out both;
      
      &:nth-child(1) {
        animation-delay: -0.32s;
      }
      
      &:nth-child(2) {
        animation-delay: -0.16s;
      }
    }
  }
  
  @keyframes bounce {
    0%, 80%, 100% {
      transform: scale(0);
    }
    40% {
      transform: scale(1);
    }
  }
}

/* Utility overrides or custom utilities */
@layer utilities {
  /* Smooth scrolling for chat container */
  .scroll-smooth {
    scroll-behavior: smooth;
  }
  
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
    
    &::-webkit-scrollbar {
      display: none;
    }
  }
  
  /* Custom focus styles for accessibility */
  .focus-ring {
    &:focus {
      outline: 2px solid var(--color-primary-500);
      outline-offset: 2px;
    }
  }
  
  /* Gradient text effect */
  .text-gradient {
    background: linear-gradient(135deg, var(--color-primary-500), var(--color-primary-700));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
}